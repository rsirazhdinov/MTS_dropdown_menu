{"remainingRequest":"/home/rsirazhdinov/PycharmProjects/flaskProject/static/node_modules/babel-loader/lib/index.js!/home/rsirazhdinov/PycharmProjects/flaskProject/static/node_modules/eslint-loader/index.js??ref--13-0!/home/rsirazhdinov/PycharmProjects/flaskProject/static/src/store/index.js","dependencies":[{"path":"/home/rsirazhdinov/PycharmProjects/flaskProject/static/src/store/index.js","mtime":1603144396867},{"path":"/home/rsirazhdinov/PycharmProjects/flaskProject/static/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rsirazhdinov/PycharmProjects/flaskProject/static/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/rsirazhdinov/PycharmProjects/flaskProject/static/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gc3RvcmUvaW5kZXguanMKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsgLy8gaW1wb3J0cyBvZiBBSkFYIGZ1bmN0aW9ucyB3aWxsIGdvIGhlcmUKCmltcG9ydCB7IGZldGNoQ2l0aWVzLCBhdXRoZW50aWNhdGUsIHJlZ2lzdGVyIGFzIF9yZWdpc3Rlciwgc2F2ZV9jdXJyZW50X2NpdHkgfSBmcm9tICdAL2FwaSc7CmltcG9ydCB7IGlzVmFsaWRKd3QsIEV2ZW50QnVzIH0gZnJvbSAnQC91dGlscyc7ClZ1ZS51c2UoVnVleCk7CnZhciBzdGF0ZSA9IHsKICAvLyBzaW5nbGUgc291cmNlIG9mIGRhdGEKICB1c2VyOiB7fSwKICBjaXRpZXM6IHt9LAogIGp3dDogJycKfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9hZENpdGllczogZnVuY3Rpb24gbG9hZENpdGllcyhjb250ZXh0KSB7CiAgICByZXR1cm4gZmV0Y2hDaXRpZXMoY29udGV4dC5zdGF0ZS5qd3QudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRDaXRpZXMnLCB7CiAgICAgICAgY2l0aWVzOiByZXNwb25zZS5kYXRhCiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgdXNlckRhdGEpIHsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyRGF0YScsIHsKICAgICAgdXNlckRhdGE6IHVzZXJEYXRhCiAgICB9KTsKICAgIHJldHVybiBhdXRoZW50aWNhdGUodXNlckRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiBjb250ZXh0LmNvbW1pdCgnc2V0Snd0VG9rZW4nLCB7CiAgICAgICAgand0OiByZXNwb25zZS5kYXRhCiAgICAgIH0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBBdXRoZW50aWNhdGluZzogJywgZXJyb3IpOwogICAgICBFdmVudEJ1cy5lbWl0KCdmYWlsZWRBdXRoZW50aWNhdGlvbicsIGVycm9yKTsKICAgIH0pOwogIH0sCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvbnRleHQsIHVzZXJEYXRhKSB7CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlckRhdGEnLCB7CiAgICAgIHVzZXJEYXRhOiB1c2VyRGF0YQogICAgfSk7CiAgICByZXR1cm4gX3JlZ2lzdGVyKHVzZXJEYXRhKS50aGVuKGNvbnRleHQuZGlzcGF0Y2goJ2xvZ2luJywgdXNlckRhdGEpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coJ0Vycm9yIFJlZ2lzdGVyaW5nOiAnLCBlcnJvcik7CiAgICAgIEV2ZW50QnVzLmVtaXQoJ2ZhaWxlZFJlZ2lzdGVyaW5nOiAnLCBlcnJvcik7CiAgICB9KTsKICB9LAogIHNhdmVfY2l0eTogZnVuY3Rpb24gc2F2ZV9jaXR5KGNvbnRleHQsIGN1cnJlbnRfY2l0eSkgewogICAgY29udGV4dC5jb21taXQoJ3NldEN1cnJlbnRDaXR5JywgewogICAgICBjaXR5OiBjdXJyZW50X2NpdHkKICAgIH0pOwogICAgcmV0dXJuIHNhdmVfY3VycmVudF9jaXR5KGN1cnJlbnRfY2l0eSwgY29udGV4dC5zdGF0ZS5qd3QudG9rZW4pOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBzZXRDaXRpZXM6IGZ1bmN0aW9uIHNldENpdGllcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgc3RhdGUuY2l0aWVzID0gcGF5bG9hZC5jaXRpZXM7CiAgfSwKICBzZXRVc2VyRGF0YTogZnVuY3Rpb24gc2V0VXNlckRhdGEoc3RhdGUsIHBheWxvYWQpIHsKICAgIGNvbnNvbGUubG9nKCdzZXRVc2VyRGF0YSBwYXlsb2FkID0gJywgcGF5bG9hZCk7CiAgICBzdGF0ZS51c2VyRGF0YSA9IHBheWxvYWQudXNlckRhdGE7CiAgfSwKICBzZXRKd3RUb2tlbjogZnVuY3Rpb24gc2V0Snd0VG9rZW4oc3RhdGUsIHBheWxvYWQpIHsKICAgIGNvbnNvbGUubG9nKCdzZXRKd3RUb2tlbiBwYXlsb2FkID0gJywgcGF5bG9hZCk7CiAgICBsb2NhbFN0b3JhZ2UudG9rZW4gPSBwYXlsb2FkLmp3dC50b2tlbjsKICAgIHN0YXRlLmp3dCA9IHBheWxvYWQuand0OwogIH0sCiAgc2V0Q3VycmVudENpdHk6IGZ1bmN0aW9uIHNldEN1cnJlbnRDaXR5KHN0YXRlLCBwYXlsb2FkKSB7CiAgICBjb25zb2xlLmxvZygnc2V0Q3VycmVudENpdHkgcGF5bG9hZCA9ICcsIHBheWxvYWQpOwogICAgc3RhdGUuY2l0aWVzLnVzZXJfY2l0eSA9IHBheWxvYWQuY3VycmVudF9jaXR5OwogIH0KfTsKdmFyIGdldHRlcnMgPSB7CiAgLy8gcmV1c2FibGUgZGF0YSBhY2Nlc3NvcnMKICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgcmV0dXJuIGlzVmFsaWRKd3Qoc3RhdGUuand0LnRva2VuKTsKICB9LAogIGdldF9jdXJyZW50X2NpdHk6IGZ1bmN0aW9uIGdldF9jdXJyZW50X2NpdHkoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jaXRpZXMudXNlcl9jaXR5OwogIH0KfTsKdmFyIHN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiBzdGF0ZSwKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGdldHRlcnM6IGdldHRlcnMKfSk7CmV4cG9ydCBkZWZhdWx0IHN0b3JlOw=="},{"version":3,"sources":["/home/rsirazhdinov/PycharmProjects/flaskProject/static/src/store/index.js"],"names":["Vue","Vuex","fetchCities","authenticate","register","save_current_city","isValidJwt","EventBus","use","state","user","cities","jwt","actions","loadCities","context","token","then","response","commit","data","login","userData","catch","error","console","log","emit","dispatch","save_city","current_city","city","mutations","setCities","payload","setUserData","setJwtToken","localStorage","setCurrentCity","user_city","getters","isAuthenticated","get_current_city","store","Store"],"mappings":"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","sourcesContent":["// store/index.js\n\nimport Vue from 'vue'\nimport Vuex from 'vuex'\n\n// imports of AJAX functions will go here\nimport {\n  fetchCities,\n  authenticate,\n  register,\n  save_current_city\n} from '@/api'\nimport { isValidJwt, EventBus } from '@/utils'\n\nVue.use(Vuex)\n\nconst state = {\n  // single source of data\n  user: {},\n  cities: {},\n  jwt: ''\n}\n\nconst actions = {\n  loadCities (context) {\n    return fetchCities(context.state.jwt.token)\n      .then((response) => {\n            context.commit('setCities', { cities: response.data })\n      })\n  },\n  login (context, userData) {\n    context.commit('setUserData', { userData })\n    return authenticate(userData)\n      .then(response => context.commit('setJwtToken', { jwt: response.data }))\n      .catch(error => {\n        console.log('Error Authenticating: ', error)\n        EventBus.emit('failedAuthentication', error)\n      })\n  },\n  register (context, userData) {\n    context.commit('setUserData', { userData })\n    return register(userData)\n      .then(context.dispatch('login', userData))\n      .catch(error => {\n        console.log('Error Registering: ', error)\n        EventBus.emit('failedRegistering: ', error)\n      })\n  },\n  save_city (context, current_city) {\n    context.commit('setCurrentCity', { city: current_city })\n    return save_current_city(current_city, context.state.jwt.token)\n  },\n}\n\nconst mutations = {\n  setCities (state, payload) {\n    state.cities = payload.cities\n  },\n  setUserData (state, payload) {\n    console.log('setUserData payload = ', payload)\n    state.userData = payload.userData\n  },\n  setJwtToken (state, payload) {\n    console.log('setJwtToken payload = ', payload)\n    localStorage.token = payload.jwt.token\n    state.jwt = payload.jwt\n  },\n  setCurrentCity (state, payload) {\n    console.log('setCurrentCity payload = ', payload)\n    state.cities.user_city = payload.current_city\n  },\n}\n\nconst getters = {\n  // reusable data accessors\n  isAuthenticated (state) {\n    return isValidJwt(state.jwt.token)\n  },\n   get_current_city (state) {\n    return state.cities.user_city\n  }\n}\n\nconst store = new Vuex.Store({\n  state,\n  actions,\n  mutations,\n  getters\n})\n\nexport default store\n"]}]}